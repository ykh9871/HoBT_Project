{% extends 'base.html' %}

{% block content %}

  <div class="container my-5">
    <div class="row">
      <div class="col-12 mb-3">
        <h2>문제 리스트</h2>
      </div>
      {% for problem in hobt_1 %}
        <div class="col-12 my-3 problem-card" id="{{ problem.qid }}" {% if problem.qid != 1 %}style="display:none"{% endif %}>
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">문제 {{ problem.qid }}</h5>
              <p class="card-text">{{ problem.content }}</p>
              <form action="{% url 'exam:exam_judge' %}" method="get">
                {% csrf_token %}
                <div class="form-group d-flex flex-row align-items-start mb-3">
                  <label for="answer{{ problem.qid }}">정답 :</label>
                  <input type="text" class="form-control ml-2" id="answer{{ problem.qid }}" name="answer" style="width: 50%;" autofocus>
                  <button type="submit" class="btn btn-primary ml-2 align-self-start">제출</button>
                  <input type="hidden" name="problem_id" value="{{ problem.qid }}">
                </div>
              </form>
              <div class="mt-3">
                <span id="answer-display{{ problem.qid }}"></span>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
      <div class="col-12 mt-3 d-flex justify-content-center">
        {% for problem in hobt_1 %}
          <a href="#{{ problem.qid }}" class="btn btn-primary mx-2" onclick="showProblem('{{ problem.qid }}')">{{ problem.qid }}</a>
        {% endfor %}
      </div>
    </div>
  </div>
  <script>
    function showProblem(id) {
      var problemCards = document.getElementsByClassName('problem-card');
      for (var i = 0; i < problemCards.length; i++) {
        if (problemCards[i].getAttribute('id') == id) {
          problemCards[i].style.display = 'block';
        } else {
          problemCards[i].style.display = 'none';
        }
      }
    }

    // 문제 1을 보여주는 코드
    window.onload = function() {
      showProblem('1');
    }
  </script>
{% endblock %}
