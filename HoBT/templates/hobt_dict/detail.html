{% extends 'base.html' %}

{% block content %}
<style>
    html, body {
        height: 100%;
    }
    .content-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 70vh;
    }
    .span {
        font-size: 1.3rem;
        white-space: pre-wrap;
    }
    .item-box {
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-bottom: 10px;
        background-color: #f8f9fa;
    }
</style>
<div class="content-container">
  <div class="container mt-3" style="max-width: 1000px; width: 100%;">
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title mb-0">{{ hobt_dict.qid }}번 문제</h3>
          </div>
          <div class="card-body">
            <div class="mb">
              <span class="span font-weight-bold">출제 연도:</span>
              <span class="span">  {{ hobt_dict.appearance_date }}</span>
            </div>
            <div class="mb">
              <span class="span font-weight-bold">대분류:</span>
              <span class="span">      {{ hobt_dict.big_category }}</span>
            </div>
            <div class="mb-4">
              <span class="span font-weight-bold">소분류:</span>
              <span class="span">      {{ hobt_dict.small_category }}</span>
            </div>
            <div class="mb-4 item-box">
              <span class="span font-weight-bold">문제:</span><br>
              <span style="font-size: 1.5rem; white-space: pre-wrap;" class="font-weight-bold">{{ hobt_dict.content }}</span>
            </div>
            <div class="mb">
              <span class="span font-weight-bold">정답:</span>
              <span class="span">         {{ hobt_dict.answer }}</span>
            </div>
            <div class="mb-4">
              <span class="span font-weight-bold">유사 답안:</span>
              <span class="span">  {{ hobt_dict.similar_answer }}</span>
            </div>
            {% if request.user.is_authenticated %}
            <div class="mb-4">
              {% if request.user in hobt_dict.hobt_dict_like.all %}
              <a href="{% url 'hobt_dict:hobt_dict_like' %}" class="btn btn-danger btn-sm" id="like-button" data-pk="{{ hobt_dict.pk }}">
                <i class="fas fa-thumbs-down"></i>
                <span>추천 취소</span>
              </a>
              {% else %}
              <a href="javascript:void(0)" data-uri="{% url 'hobt_dict:hobt_dict_like' answer.id  %}"
                 class="recommend btn btn-sm btn-outline-secondary"> 추천
                  <span class="badge rounded-pill bg-success">{{hobt_dict.hobtdict_like.count}}</span>
                </a>
              {% endif %}
              <span class="ml-2" id="like-count">{{ hobt_dict_hobtdict_like.count }}</span>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block script %}
<script type='text/javascript'>
const delete_elements = document.getElementsByClassName("delete");
Array.from(delete_elements).forEach(function(element) {
    element.addEventListener('click', function() {
        if(confirm("정말로 삭제하시겠습니까?")) {
            location.href = this.dataset.uri;
        };
    });
});
const recommend_elements = document.getElementsByClassName("recommend");
Array.from(recommend_elements).forEach(function(element) {
    element.addEventListener('click', function() {
        if(confirm("정말로 추천하시겠습니까?")) {
            location.href = this.dataset.uri;
        };
    });
});
</script>
{% endblock %}